"use strict";(globalThis.webpackChunkgoose=globalThis.webpackChunkgoose||[]).push([[4123],{28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>l});var i=s(96540);const t={},a=i.createContext(t);function r(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(a.Provider,{value:n},e.children)}},33855:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"guides/codebase-analysis","title":"Codebase Analysis","description":"Understand codebases with semantic analysis and call graphs","source":"@site/docs/guides/codebase-analysis.md","sourceDirName":"guides","slug":"/guides/codebase-analysis","permalink":"/goose/docs/guides/codebase-analysis","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":111,"frontMatter":{"title":"Codebase Analysis","sidebar_label":"Codebase Analysis","description":"Understand codebases with semantic analysis and call graphs","sidebar_position":111},"sidebar":"tutorialSidebar","previous":{"title":"Enhanced Code Editing","permalink":"/goose/docs/guides/enhanced-code-editing"},"next":{"title":"Terminal Integration","permalink":"/goose/docs/guides/terminal-integration"}}');var t=s(74848),a=s(28453);const r={title:"Codebase Analysis",sidebar_label:"Codebase Analysis",description:"Understand codebases with semantic analysis and call graphs",sidebar_position:111},l=void 0,c={},o=[{value:"Function Definition",id:"function-definition",level:4},{value:"Incoming Calls (Functions that call authenticate)",id:"incoming-calls-functions-that-call-authenticate",level:4},{value:"Outgoing Calls (Functions that authenticate calls)",id:"outgoing-calls-functions-that-authenticate-calls",level:4},{value:"Analysis Modes",id:"analysis-modes",level:2},{value:"Understanding Project Organization",id:"understanding-project-organization",level:3},{value:"Inspecting a File",id:"inspecting-a-file",level:3},{value:"Tracking a Symbol Across Files",id:"tracking-a-symbol-across-files",level:3},{value:"Common Parameters",id:"common-parameters",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Handling Large Outputs",id:"handling-large-outputs",level:3},{value:"Performance Tips",id:"performance-tips",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components},{Details:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.a,{href:"/docs/mcp/developer-mcp",children:"Developer extension"})," includes an ",(0,t.jsx)(n.code,{children:"analyze"})," tool that helps you understand code structure, track symbol usage, and explore call graphs across your codebase. It's automatically available when the Developer extension is enabled and supports file types for ",(0,t.jsx)(n.a,{href:"https://github.com/block/goose/blob/main/crates/goose-mcp/src/developer/analyze/languages/mod.rs",children:"multiple programming languages"}),"."]}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"Example analysis: Tracking a function across files"}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Prompt:"})}),(0,t.jsx)(n.p,{children:'"Show me the call graph for the authenticate function"'}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Output:"})}),(0,t.jsxs)(n.admonition,{title:"Desktop",type:"info",children:[(0,t.jsxs)(n.p,{children:["I'll analyze how the ",(0,t.jsx)(n.code,{children:"authenticate"})," function is used across your codebase."]}),(0,t.jsxs)(n.p,{children:["Based on my analysis, here's how the ",(0,t.jsx)(n.code,{children:"authenticate"})," function is used in your codebase:"]}),(0,t.jsx)(n.h4,{id:"function-definition",children:"Function Definition"}),(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"authenticate"})," function is defined in ",(0,t.jsx)(n.code,{children:"auth.py"})," at line 15. It takes username and password parameters and handles user authentication."]}),(0,t.jsx)(n.h4,{id:"incoming-calls-functions-that-call-authenticate",children:"Incoming Calls (Functions that call authenticate)"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"login_handler()"})," in ",(0,t.jsx)(n.code,{children:"api.py:25"})," - The API endpoint that processes login requests"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"admin_login()"})," in ",(0,t.jsx)(n.code,{children:"admin.py:102"})," - Special authentication flow for admin users"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"test_auth()"})," in ",(0,t.jsx)(n.code,{children:"tests/test_auth.py:45"})," - Test case for authentication"]}),"\n"]}),(0,t.jsx)(n.h4,{id:"outgoing-calls-functions-that-authenticate-calls",children:"Outgoing Calls (Functions that authenticate calls)"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"validate_credentials()"})," in ",(0,t.jsx)(n.code,{children:"db.py:102"})," - Checks credentials against the database"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"log_attempt()"})," in ",(0,t.jsx)(n.code,{children:"logger.py:45"})," - Records authentication attempts"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"check_rate_limit()"})," in ",(0,t.jsx)(n.code,{children:"security.py:78"})," - Prevents brute force attacks"]}),"\n"]}),(0,t.jsxs)(n.p,{children:["This shows that ",(0,t.jsx)(n.code,{children:"authenticate"})," is a central function in your authentication flow, called by multiple entry points and depending on database validation, logging, and security checks."]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"analysis-modes",children:"Analysis Modes"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"analyze"})," tool operates in three modes\u2014Structure, Semantic, and Focus\u2014depending on whether you\u2019re analyzing directories, files, or symbols. Invoke it through natural language or direct commands with ",(0,t.jsx)(n.a,{href:"#common-parameters",children:"parameters"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"understanding-project-organization",children:"Understanding Project Organization"}),"\n",(0,t.jsx)(n.p,{children:"Get a structural overview of your codebase by analyzing a directory\u2014understand project organization, identify large files, and view codebase metrics."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Natural language:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'"Can you analyze the structure of my src/ directory?"'}),"\n",(0,t.jsx)(n.li,{children:'"Give me an overview of this project\'s code structure"'}),"\n",(0,t.jsx)(n.li,{children:'"What\'s the main entry point of this Python project?"'}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Direct commands:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Get overview with default depth (3 levels)\nanalyze path="src/"\n\n# Get overview limited to 2 subdirectory levels\nanalyze path="." max_depth=2\n'})}),"\n",(0,t.jsx)(n.h3,{id:"inspecting-a-file",children:"Inspecting a File"}),"\n",(0,t.jsx)(n.p,{children:"Get semantic details for a single file\u2014see its functions, classes, and imports to understand structure and find specific implementations."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Natural language:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'"What functions are in main.py?"'}),"\n",(0,t.jsx)(n.li,{children:'"Show me the structure of src/utils.py"'}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Direct commands:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Get file details\nanalyze path="main.py"\n\n# Analyze specific file\nanalyze path="src/utils.py"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"tracking-a-symbol-across-files",children:"Tracking a Symbol Across Files"}),"\n",(0,t.jsx)(n.p,{children:"Focus on a specific function, class, or method to see where it\u2019s defined and how it\u2019s called across files\u2014useful for refactoring and debugging."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Natural language:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'"Trace the dependencies for the authenticate function"'}),"\n",(0,t.jsx)(n.li,{children:'"Show me the call graph for UserClass"'}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Direct commands:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Track function usage\nanalyze path="src/" focus="authenticate"\n\n# Track with deeper call chains\nanalyze path="." focus="UserClass" follow_depth=3\n'})}),"\n",(0,t.jsx)(n.h2,{id:"common-parameters",children:"Common Parameters"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"path"})}),(0,t.jsx)(n.td,{children:"None (required)"}),(0,t.jsx)(n.td,{children:"Absolute or relative path to the file or directory to analyze"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"focus"})}),(0,t.jsx)(n.td,{children:"None"}),(0,t.jsxs)(n.td,{children:["Name of the symbol to track. For cross-file tracking, ",(0,t.jsx)(n.code,{children:"path"})," must be a directory."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"follow_depth"})}),(0,t.jsx)(n.td,{children:"2"}),(0,t.jsxs)(n.td,{children:["How many steps to trace from the focused symbol (0=where defined, 1=immediate callers/callees, 2=their callers/callees, etc.). Used with the ",(0,t.jsx)(n.code,{children:"focus"})," parameter."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"max_depth"})}),(0,t.jsx)(n.td,{children:"3"}),(0,t.jsxs)(n.td,{children:["How many subdirectory levels to analyze when ",(0,t.jsx)(n.code,{children:"path"})," is a directory (0=unlimited)"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"force"})}),(0,t.jsx)(n.td,{children:"false"}),(0,t.jsx)(n.td,{children:"Receive full analysis results (otherwise, only a warning message is shown when the results exceed 1000 lines)"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(n.h3,{id:"handling-large-outputs",children:"Handling Large Outputs"}),"\n",(0,t.jsx)(n.p,{children:"If the analysis results exceed 1000 lines, the tool returns a warning message instead of the analysis. Options for managing large outputs:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Use ",(0,t.jsx)(n.code,{children:"force=true"})]})," to bypass the warning and see the full output (may consume significant conversation context)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Narrow your scope"})," by analyzing a specific subdirectory or file"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Reduce depth"})," with ",(0,t.jsx)(n.code,{children:"max_depth=1"})," or ",(0,t.jsx)(n.code,{children:"max_depth=2"})," for directories"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Delegate to a ",(0,t.jsx)(n.a,{href:"/docs/guides/subagents",children:"subagent"})]}),' to analyze and summarize without filling your conversation history, for example: "Use a subagent to analyze the entire src/ directory and summarize the main components"']}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"performance-tips",children:"Performance Tips"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Start with smaller scopes (specific files or subdirectories) before analyzing entire projects"}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"max_depth=1"})," or ",(0,t.jsx)(n.code,{children:"max_depth=2"})," to limit directory traversal depth"]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.a,{href:"/docs/guides/using-gooseignore",children:(0,t.jsx)(n.code,{children:".gooseignore"})})," and ",(0,t.jsx)(n.code,{children:".gitignore"})," files to exclude unnecessary files from analysis (like ",(0,t.jsx)(n.code,{children:"node_modules/"}),", build artifacts, or sensitive files)"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);