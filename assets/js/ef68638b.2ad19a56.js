"use strict";(globalThis.webpackChunkgoose=globalThis.webpackChunkgoose||[]).push([[2567],{11470:(e,n,i)=>{i.d(n,{A:()=>w});var s=i(96540),r=i(34164),t=i(17559),l=i(23104),d=i(56347),c=i(205),a=i(57485),o=i(31682),h=i(70679);function u(e){return s.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:n,children:i}=e;return(0,s.useMemo)(()=>{const e=n??function(e){return u(e).map(({props:{value:e,label:n,attributes:i,default:s}})=>({value:e,label:n,attributes:i,default:s}))}(i);return function(e){const n=(0,o.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,i])}function x({value:e,tabValues:n}){return n.some(n=>n.value===e)}function j({queryString:e=!1,groupId:n}){const i=(0,d.W6)(),r=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,a.aZ)(r),(0,s.useCallback)(e=>{if(!r)return;const n=new URLSearchParams(i.location.search);n.set(r,e),i.replace({...i.location,search:n.toString()})},[r,i])]}function m(e){const{defaultValue:n,queryString:i=!1,groupId:r}=e,t=p(e),[l,d]=(0,s.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!x({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const i=n.find(e=>e.default)??n[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:n,tabValues:t})),[a,o]=j({queryString:i,groupId:r}),[u,m]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[i,r]=(0,h.Dv)(n);return[i,(0,s.useCallback)(e=>{n&&r.set(e)},[n,r])]}({groupId:r}),f=(()=>{const e=a??u;return x({value:e,tabValues:t})?e:null})();(0,c.A)(()=>{f&&d(f)},[f]);return{selectedValue:l,selectValue:(0,s.useCallback)(e=>{if(!x({value:e,tabValues:t}))throw new Error(`Can't select invalid tab value=${e}`);d(e),o(e),m(e)},[o,m,t]),tabValues:t}}var f=i(92303);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=i(74848);function y({className:e,block:n,selectedValue:i,selectValue:s,tabValues:t}){const d=[],{blockElementScrollPositionUntilNextRender:c}=(0,l.a_)(),a=e=>{const n=e.currentTarget,r=d.indexOf(n),l=t[r].value;l!==i&&(c(n),s(l))},o=e=>{let n=null;switch(e.key){case"Enter":a(e);break;case"ArrowRight":{const i=d.indexOf(e.currentTarget)+1;n=d[i]??d[0];break}case"ArrowLeft":{const i=d.indexOf(e.currentTarget)-1;n=d[i]??d[d.length-1];break}}n?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},e),children:t.map(({value:e,label:n,attributes:s})=>(0,v.jsx)("li",{role:"tab",tabIndex:i===e?0:-1,"aria-selected":i===e,ref:e=>{d.push(e)},onKeyDown:o,onClick:a,...s,className:(0,r.A)("tabs__item",g.tabItem,s?.className,{"tabs__item--active":i===e}),children:n??e},e))})}function b({lazy:e,children:n,selectedValue:i}){const t=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=t.find(e=>e.props.value===i);return e?(0,s.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:t.map((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==i}))})}function _(e){const n=m(e);return(0,v.jsxs)("div",{className:(0,r.A)(t.G.tabs.container,"tabs-container",g.tabList),children:[(0,v.jsx)(y,{...n,...e}),(0,v.jsx)(b,{...n,...e})]})}function w(e){const n=(0,f.A)();return(0,v.jsx)(_,{...e,children:u(e.children)},String(n))}},19365:(e,n,i)=>{i.d(n,{A:()=>l});i(96540);var s=i(34164);const r={tabItem:"tabItem_Ymn6"};var t=i(74848);function l({children:e,hidden:n,className:i}){return(0,t.jsx)("div",{role:"tabpanel",className:(0,s.A)(r.tabItem,i),hidden:n,children:e})}},28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>d});var s=i(96540);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}},64127:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>p,frontMatter:()=>c,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"guides/recipes/recipe-reference","title":"Recipe Reference Guide","description":"Complete technical reference for creating and customizing recipes in goose","source":"@site/docs/guides/recipes/recipe-reference.md","sourceDirName":"guides/recipes","slug":"/guides/recipes/recipe-reference","permalink":"/goose/docs/guides/recipes/recipe-reference","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Recipe Reference Guide","sidebar_label":"Recipe Reference","description":"Complete technical reference for creating and customizing recipes in goose"},"sidebar":"tutorialSidebar","previous":{"title":"Shareable Recipes","permalink":"/goose/docs/guides/recipes/session-recipes"},"next":{"title":"Saving Recipes","permalink":"/goose/docs/guides/recipes/storing-recipes"}}');var r=i(74848),t=i(28453),l=i(11470),d=i(19365);const c={sidebar_position:2,title:"Recipe Reference Guide",sidebar_label:"Recipe Reference",description:"Complete technical reference for creating and customizing recipes in goose"},a=void 0,o={},h=[{value:"Recipe File Format",id:"recipe-file-format",level:2},{value:"Recipe Location",id:"recipe-location",level:2},{value:"Core Recipe Schema",id:"core-recipe-schema",level:2},{value:"Field Specifications",id:"field-specifications",level:2},{value:"Activities",id:"activities",level:3},{value:"Activity Types",id:"activity-types",level:4},{value:"Parameter Substitution",id:"parameter-substitution",level:4},{value:"Example Configuration",id:"example-configuration",level:4},{value:"Extensions",id:"extensions",level:3},{value:"Extension Schema",id:"extension-schema",level:4},{value:"Extension Types",id:"extension-types",level:4},{value:"Example Extensions Configuration",id:"example-extensions-configuration",level:4},{value:"Extension Secrets",id:"extension-secrets",level:4},{value:"Parameters",id:"parameters",level:3},{value:"Parameter Schema",id:"parameter-schema",level:4},{value:"Parameter Requirements",id:"parameter-requirements",level:4},{value:"Input Types",id:"input-types",level:4},{value:"Parameter Substitution in Desktop",id:"parameter-substitution-in-desktop",level:4},{value:"Response",id:"response",level:3},{value:"Response Schema",id:"response-schema",level:4},{value:"Basic Structure",id:"basic-structure",level:4},{value:"Simple Example",id:"simple-example",level:4},{value:"Retry",id:"retry",level:3},{value:"Retry Schema",id:"retry-schema",level:4},{value:"Success Check Configuration",id:"success-check-configuration",level:4},{value:"How Retry Logic Works",id:"how-retry-logic-works",level:4},{value:"Basic Retry Example",id:"basic-retry-example",level:4},{value:"Advanced Retry Example",id:"advanced-retry-example",level:4},{value:"Environment Variables",id:"environment-variables",level:4},{value:"Settings",id:"settings",level:3},{value:"Settings Schema",id:"settings-schema",level:4},{value:"Example Settings Configuration",id:"example-settings-configuration",level:4},{value:"Subrecipes",id:"subrecipes",level:3},{value:"Subrecipe Schema",id:"subrecipe-schema",level:4},{value:"Example Subrecipe Configuration",id:"example-subrecipe-configuration",level:4},{value:"Desktop Metadata Fields",id:"desktop-metadata-fields",level:2},{value:"Template Support",id:"template-support",level:2},{value:"Template Inheritance",id:"template-inheritance",level:3},{value:"indent() Filter For Multi-Line Values",id:"indent-filter-for-multi-line-values",level:3},{value:"Built-in Parameters",id:"built-in-parameters",level:3},{value:"Validation Rules",id:"validation-rules",level:2},{value:"Recipe-Level Validation",id:"recipe-level-validation",level:3},{value:"Parameter Validation",id:"parameter-validation",level:3},{value:"Complete Recipe Example",id:"complete-recipe-example",level:2},{value:"Error Handling",id:"error-handling",level:2},{value:"Retry-Specific Errors",id:"retry-specific-errors",level:3},{value:"Learn More",id:"learn-more",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components},{Details:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Recipes are reusable goose configurations that package up instructions and settings so the setup can be easily shared and launched by others."}),"\n",(0,r.jsx)(n.h2,{id:"recipe-file-format",children:"Recipe File Format"}),"\n",(0,r.jsx)(n.p,{children:"Recipes can be defined in:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:".yaml"})," (recommended) and ",(0,r.jsx)(n.code,{children:".yml"})," files"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:".json"})," files"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:".yml"})," files aren't supported by goose CLI."]})}),"\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.a,{href:"/docs/guides/recipes/session-recipes",children:"Shareable Recipes"})," to learn how to create, use, and manage recipes."]}),"\n",(0,r.jsx)(n.h2,{id:"recipe-location",children:"Recipe Location"}),"\n",(0,r.jsx)(n.p,{children:"Recipes can be loaded from:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Local filesystem:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Current directory"}),"\n",(0,r.jsxs)(n.li,{children:["Directories specified in ",(0,r.jsx)(n.a,{href:"/docs/guides/environment-variables#recipe-configuration",children:(0,r.jsx)(n.code,{children:"GOOSE_RECIPE_PATH"})})," environment variable"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"GitHub repositories:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Configure using ",(0,r.jsx)(n.a,{href:"/docs/guides/environment-variables#recipe-configuration",children:(0,r.jsx)(n.code,{children:"GOOSE_RECIPE_GITHUB_REPO"})})," configuration key"]}),"\n",(0,r.jsxs)(n.li,{children:["Requires GitHub CLI (",(0,r.jsx)(n.code,{children:"gh"}),") to be installed and authenticated"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"core-recipe-schema",children:"Core Recipe Schema"}),"\n",(0,r.jsx)(n.p,{children:"Recipes follow this schema structure:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"description"})}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"A detailed description of what the recipe does"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"instructions"})}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:"\u2705*"}),(0,r.jsx)(n.td,{children:"Template instructions that can include parameter substitutions"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"prompt"})}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:"\u2705*"}),(0,r.jsxs)(n.td,{children:["A template prompt that can include parameter substitutions. Required in ",(0,r.jsx)(n.a,{href:"/docs/tutorials/headless-goose",children:"headless"})," (non-interactive) mode."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"title"})}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"A short title describing the recipe"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#activities",children:(0,r.jsx)(n.code,{children:"activities"})})}),(0,r.jsx)(n.td,{children:"Array"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"List of example prompts that can include parameter substitutions. Activities appear as clickable bubbles in goose Desktop."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#extensions",children:(0,r.jsx)(n.code,{children:"extensions"})})}),(0,r.jsx)(n.td,{children:"Array"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"List of extension configurations"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#parameters",children:(0,r.jsx)(n.code,{children:"parameters"})})}),(0,r.jsx)(n.td,{children:"Array"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"List of parameter definitions for dynamic recipes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#response",children:(0,r.jsx)(n.code,{children:"response"})})}),(0,r.jsx)(n.td,{children:"Object"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"Structured output schema for automation workflows"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#retry",children:(0,r.jsx)(n.code,{children:"retry"})})}),(0,r.jsx)(n.td,{children:"Object"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"Configuration for automated retry logic with success validation"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#settings",children:(0,r.jsx)(n.code,{children:"settings"})})}),(0,r.jsx)(n.td,{children:"Object"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"Configuration for model provider, model name, and other settings"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#subrecipes",children:(0,r.jsx)(n.code,{children:"sub_recipes"})})}),(0,r.jsx)(n.td,{children:"Array"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"List of subrecipes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"version"})}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:'The recipe format version, defaults to "1.0.0" if omitted'})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["*At least one of ",(0,r.jsx)(n.code,{children:"instructions"})," or ",(0,r.jsx)(n.code,{children:"prompt"})," must be provided."]}),"\n",(0,r.jsx)(n.h2,{id:"field-specifications",children:"Field Specifications"}),"\n",(0,r.jsx)(n.h3,{id:"activities",children:"Activities"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"activities"})," field defines an optional message and clickable activity bubbles (buttons) that appears when a recipe is opened in goose Desktop."]}),"\n",(0,r.jsx)(n.admonition,{title:"Desktop only",type:"info",children:(0,r.jsxs)(n.p,{children:["Activities are a Desktop-only feature. When recipes with activities are run via the CLI or as a scheduled job, the ",(0,r.jsx)(n.code,{children:"activities"})," field is ignored and has no effect on recipe execution."]})}),"\n",(0,r.jsx)(n.h4,{id:"activity-types",children:"Activity Types"}),"\n",(0,r.jsx)(n.p,{children:"Activities can be defined in two ways:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Message Activity"}),": Displays the markdown-formatted activity text in an info box above the activity bubbles. For example:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'activities:\n  - "message: **Welcome!** Here\'s what I can help with:\\n\\n\u2022 \ud83d\udcca Data analysis\\n\u2022 \ud83d\udd0d Code review\\n\u2022 \ud83d\udcdd Documentation\\n\\nSelect an option below to begin."\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Only include one ",(0,r.jsx)(n.code,{children:"message:"})," prefixed activity. Additional ",(0,r.jsx)(n.code,{children:"message:"}),' prefixed activities become regular clickable bubbles (and display the literal "message:" text).']}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Button Activities"}),": Text to display in activity bubbles, which send the activity text as a prompt when clicked"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"parameter-substitution",children:"Parameter Substitution"}),"\n",(0,r.jsxs)(n.p,{children:["Activities support ",(0,r.jsx)(n.a,{href:"#parameters",children:"parameter substitution"}),", allowing you to create dynamic, personalized activity bubbles. After users provide parameter values in the ",(0,r.jsx)(n.strong,{children:"Recipe Parameters"})," dialog, the values are substituted into the activity text before the bubbles are displayed."]}),"\n",(0,r.jsx)(n.h4,{id:"example-configuration",children:"Example Configuration"}),"\n",(0,r.jsxs)(l.A,{groupId:"format",children:[(0,r.jsx)(d.A,{value:"yaml",label:"YAML",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'version: "1.0.0"\ntitle: "Code Review Assistant"\ndescription: "Review code with customizable focus areas"\nparameters:\n  - key: language\n    input_type: string\n    requirement: required\n    description: "Programming language to review"\n  - key: focus\n    input_type: string\n    requirement: optional\n    default: "best practices"\n    description: "Review focus area"\n\nactivities:\n  - "message: Click an option below to start reviewing {{ language }} code with a focus on {{ focus }}."\n  - "Review the current file for {{ focus }}"\n  - "Suggest improvements for {{ language }} code quality"\n  - "Check for security vulnerabilities"\n  - "Generate unit tests"\n'})})}),(0,r.jsx)(d.A,{value:"json",label:"JSON",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "version": "1.0.0",\n  "title": "Code Review Assistant",\n  "description": "Review code with customizable focus areas",\n  "parameters": [\n    {\n      "key": "language",\n      "input_type": "string",\n      "requirement": "required",\n      "description": "Programming language to review"\n    },\n    {\n      "key": "focus",\n      "input_type": "string",\n      "requirement": "optional",\n      "default": "best practices",\n      "description": "Review focus area"\n    }\n  ],\n  "activities": [\n    "message: Click an option below to start reviewing {{ language }} code with a focus on {{ focus }}.",\n    "Review the current file for {{ focus }}",\n    "Suggest improvements for {{ language }} code quality",\n    "Check for security vulnerabilities",\n    "Generate unit tests"\n  ]\n}\n'})})})]}),"\n",(0,r.jsx)(n.p,{children:"In this example:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'The message activity displays instructions with substituted parameter values, for example: "Click an option below to start reviewing rust code with a focus on best practices."'}),"\n",(0,r.jsx)(n.li,{children:'The first two activity bubbles use parameter substitution, for example: "Review the current file for best practices"'}),"\n",(0,r.jsx)(n.li,{children:"The last two activity bubbles are static prompts that work regardless of parameters"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"extensions",children:"Extensions"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"extensions"})," field allows you to specify which Model Context Protocol (MCP) servers and other extensions the recipe needs to function. Each extension in the ",(0,r.jsx)(n.code,{children:"extensions"})," array has the following schema:"]}),"\n",(0,r.jsx)(n.h4,{id:"extension-schema",children:"Extension Schema"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"type"})}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:'Type of extension (e.g., "stdio")'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"name"})}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:"Unique name for the extension"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"cmd"})}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:"Command to run the extension"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"args"})}),(0,r.jsx)(n.td,{children:"Array"}),(0,r.jsx)(n.td,{children:"List of arguments for the command"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"env_keys"})}),(0,r.jsx)(n.td,{children:"Array"}),(0,r.jsx)(n.td,{children:"(Optional) Names of environment variables required by the extension"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"timeout"})}),(0,r.jsx)(n.td,{children:"Number"}),(0,r.jsx)(n.td,{children:"Timeout in seconds"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"bundled"})}),(0,r.jsx)(n.td,{children:"Boolean"}),(0,r.jsx)(n.td,{children:"(Optional) Whether the extension is bundled with goose"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"description"})}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:"Description of what the extension does"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"available_tools"})}),(0,r.jsx)(n.td,{children:"Array"}),(0,r.jsx)(n.td,{children:"List of tool names within the extension that will be available. When not specified all will be available"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"extension-types",children:"Extension Types"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"stdio"})}),": Standard I/O client with command and arguments"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"sse"})}),": Server-sent events client with a URI endpoint"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"builtin"})}),": Built-in extension that is part of the bundled goose MCP server"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"platform"})}),": Platform extensions that run in the agent process"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"streamable_http"})}),": Streamable HTTP client with URI endpoint"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"frontend"})}),": Frontend-provided tools called through the frontend"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"inline_python"})}),": Inline Python code executed using uvx. Requires ",(0,r.jsx)(n.code,{children:"code"})," field; optional ",(0,r.jsx)(n.code,{children:"dependencies"})," for packages."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"example-extensions-configuration",children:"Example Extensions Configuration"}),"\n",(0,r.jsxs)(l.A,{groupId:"format",children:[(0,r.jsx)(d.A,{value:"yaml",label:"YAML",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'extensions:\n  - type: stdio\n    name: codesearch\n    cmd: uvx\n    args:\n      - mcp_codesearch@latest\n    timeout: 300\n    bundled: true\n    description: "Query https://codesearch.sqprod.co/ directly from goose"\n  \n  - type: stdio\n    name: presidio\n    timeout: 300\n    cmd: uvx\n    args:\n      - \'mcp_presidio@latest\'\n    available_tools:\n      - query_logs\n\n  - type: stdio\n    name: github-mcp\n    cmd: github-mcp-server\n    args: []\n    env_keys:\n      - GITHUB_PERSONAL_ACCESS_TOKEN\n    timeout: 60\n    description: "GitHub MCP extension for repository operations"\n    \n  - type: inline_python\n    name: data_processor\n    code: |\n      import pandas as pd\n      print("Processing data...")\n    dependencies:\n      - pandas\n      - numpy\n    timeout: 120\n    description: "Process data using pandas"\n'})})}),(0,r.jsx)(d.A,{value:"json",label:"JSON",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "extensions": [\n    {\n      "type": "stdio",\n      "name": "codesearch",\n      "cmd": "uvx",\n      "args": ["mcp_codesearch@latest"],\n      "timeout": 300,\n      "bundled": true,\n      "description": "Query https://codesearch.sqprod.co/ directly from goose"\n    },\n    {\n      "type": "stdio",\n      "name": "presidio",\n      "timeout": 300,\n      "cmd": "uvx",\n      "args": ["mcp_presidio@latest"],\n      "available_tools": ["query_logs"]\n    },\n    {\n      "type": "stdio",\n      "name": "github-mcp",\n      "cmd": "github-mcp-server",\n      "args": [],\n      "env_keys": ["GITHUB_PERSONAL_ACCESS_TOKEN"],\n      "timeout": 60,\n      "description": "GitHub MCP extension for repository operations"\n    },\n    {\n      "type": "inline_python",\n      "name": "data_processor",\n      "code": "import pandas as pd\\nprint(\\"Processing data...\\")",\n      "dependencies": ["pandas", "numpy"],\n      "timeout": 120,\n      "description": "Process data using pandas"\n    }\n  ]\n}\n'})})})]}),"\n",(0,r.jsx)(n.h4,{id:"extension-secrets",children:"Extension Secrets"}),"\n",(0,r.jsx)(n.p,{children:"This feature is only available through the CLI."}),"\n",(0,r.jsx)(n.p,{children:"If a recipe uses an extension that requires a secret, goose can prompt users to provide the secret when running the recipe:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["When a recipe is loaded, goose scans all extensions (including those in subrecipes) for ",(0,r.jsx)(n.code,{children:"env_keys"})," fields"]}),"\n",(0,r.jsx)(n.li,{children:"If any required environment variables are missing from the secure keyring, goose prompts the user to enter them"}),"\n",(0,r.jsx)(n.li,{children:"Values are stored securely in the system keyring and reused for subsequent runs"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"To update a stored secret, remove it from the system keyring and run the recipe again to be re-prompted."}),"\n",(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsxs)(n.p,{children:["This feature is designed to prompt for and securely store secrets (such as API keys), but ",(0,r.jsx)(n.code,{children:"env_keys"})," can include any environment variable needed by the extension (such as API endpoints, configuration values, etc.)."]}),(0,r.jsxs)(n.p,{children:["Users can press ",(0,r.jsx)(n.code,{children:"ESC"})," to skip entering a variable if it's optional for the extension."]})]}),"\n",(0,r.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"parameters"})," field allows you to create dynamic, reusable recipes that can be customized for different contexts. Parameters define placeholders that users fill in when running the recipe, making the recipe more flexible and adaptable."]}),"\n",(0,r.jsxs)(n.p,{children:["Parameter substitution uses Jinja-style template syntax with ",(0,r.jsx)(n.code,{children:"{{ parameter_name }}"})," placeholders. Each parameter in the ",(0,r.jsx)(n.code,{children:"parameters"})," array has the following schema:"]}),"\n",(0,r.jsx)(n.h4,{id:"parameter-schema",children:"Parameter Schema"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"key"})}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"Unique identifier for the parameter"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"input_type"})}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsxs)(n.td,{children:["Type of input: ",(0,r.jsx)(n.code,{children:'"string"'})," (default), ",(0,r.jsx)(n.code,{children:'"number"'}),", ",(0,r.jsx)(n.code,{children:'"boolean"'}),", ",(0,r.jsx)(n.code,{children:'"date"'}),", ",(0,r.jsx)(n.code,{children:'"file"'}),", or ",(0,r.jsx)(n.code,{children:'"select"'})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"requirement"})}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:'One of: "required", "optional", or "user_prompt"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"description"})}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"Human-readable description of the parameter"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"default"})}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"Default value for optional parameters"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"options"})}),(0,r.jsx)(n.td,{children:"Array"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsxs)(n.td,{children:["List of available choices (required for ",(0,r.jsx)(n.code,{children:"select"})," input type)"]})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"parameter-requirements",children:"Parameter Requirements"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"}),": Parameter must be provided when using the recipe"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"optional"}),": Can be omitted if a default value is specified"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user_prompt"}),": Will interactively prompt the user for input if not provided"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"required"})," and ",(0,r.jsx)(n.code,{children:"optional"})," parameters work best for recipes opened in goose Desktop. If a value isn't provided for a ",(0,r.jsx)(n.code,{children:"user_prompt"})," parameter, the parameter won't be substituted and may appear as literal ",(0,r.jsx)(n.code,{children:"{{ parameter_name }}"})," text in the recipe output."]}),"\n",(0,r.jsx)(n.h4,{id:"input-types",children:"Input Types"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"string"}),": Default type. The parameter value is used as-is in template substitution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number"}),": Numeric values. Desktop UI provides number input validation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"boolean"}),': True/false values. Desktop UI shows dropdown with "True"/"False" options']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"date"}),": Date values. Currently renders as text input"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file"}),": The parameter value should be a file path. goose reads the file contents and substitutes the actual content (not the path) into the template"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"select"}),": Dropdown selection with predefined options. Requires ",(0,r.jsx)(n.code,{children:"options"})," field"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'parameters:\n  - key: max_files\n    input_type: number\n    requirement: optional\n    default: "10"\n    description: "Maximum files to process"\n  \n  - key: output_format\n    input_type: select\n    requirement: required\n    description: "Choose output format"\n    options:\n      - json\n      - markdown\n      - csv\n  \n  - key: enable_debug\n    input_type: boolean\n    requirement: optional\n    default: "false"\n    description: "Enable debug mode"\n  \n  - key: source_code\n    input_type: file\n    requirement: required\n    description: "Path to the source code file to analyze"\n\nprompt: "Process {{ max_files }} files in {{ output_format }} format. Debug: {{ enable_debug }}. Code:\\n\\n{{ source_code }}"\n'})}),"\n",(0,r.jsx)(n.admonition,{type:"important",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Optional parameters MUST have a default value specified"}),"\n",(0,r.jsx)(n.li,{children:"Required parameters cannot have default values"}),"\n",(0,r.jsx)(n.li,{children:"File parameters cannot have default values regardless of requirement type to prevent unintended importing of sensitive files"}),"\n",(0,r.jsxs)(n.li,{children:["Select parameters MUST have an ",(0,r.jsx)(n.code,{children:"options"})," field with available choices"]}),"\n",(0,r.jsx)(n.li,{children:"Parameter keys must match any template variables used in instructions, prompt, or activities"}),"\n"]})}),"\n",(0,r.jsx)(n.h4,{id:"parameter-substitution-in-desktop",children:"Parameter Substitution in Desktop"}),"\n",(0,r.jsxs)(n.p,{children:["When a recipe with parameters is opened in goose Desktop, users are presented with a ",(0,r.jsx)(n.strong,{children:"Recipe Parameters"})," dialog where they can:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Provide values for required parameters"}),"\n",(0,r.jsx)(n.li,{children:"Modify or accept default values for optional parameters"}),"\n",(0,r.jsxs)(n.li,{children:["Enter values for ",(0,r.jsx)(n.code,{children:"user_prompt"})," parameters"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Once parameter values are submitted, they are substituted into the recipe's ",(0,r.jsx)(n.code,{children:"instructions"}),", ",(0,r.jsx)(n.code,{children:"prompt"}),", and ",(0,r.jsx)(n.code,{children:"activities"})," fields before the recipe starts."]}),"\n",(0,r.jsx)(n.h3,{id:"response",children:"Response"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"response"})," field enables recipes to enforce a final structured JSON output. When you specify a ",(0,r.jsx)(n.code,{children:"json_schema"}),", goose will:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Validate the output"}),": Validates the output JSON against your JSON schema with basic JSON schema validations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Final structured output"}),": Ensure the final output of the agent is a response matching your JSON structure"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["This feature is designed for ",(0,r.jsx)(n.strong,{children:"non-interactive automation"})," to ensure consistent, parseable output. Recipes can produce structured output when run from either the goose CLI or goose Desktop. See ",(0,r.jsx)(n.a,{href:"/docs/guides/recipes/session-recipes#structured-output-for-automation",children:"use cases and ideas for automation workflows"}),"."]}),"\n",(0,r.jsx)(n.h4,{id:"response-schema",children:"Response Schema"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"json_schema"})}),(0,r.jsx)(n.td,{children:"Object"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.a,{href:"https://json-schema.org/",children:"JSON schema"})," for output validation"]})]})})]}),"\n",(0,r.jsx)(n.h4,{id:"basic-structure",children:"Basic Structure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"response:\n  json_schema:\n    type: object\n    properties:\n      # Define your fields here, with their type and description\n    required:\n      # List required field names\n"})}),"\n",(0,r.jsx)(n.h4,{id:"simple-example",children:"Simple Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'version: "1.0.0"\ntitle: "Task Summary"\ndescription: "Summarize completed tasks"\nprompt: "Summarize the tasks you completed"\nresponse:\n  json_schema:\n    type: object\n    properties:\n      summary:\n        type: string\n        description: "Brief summary of work done"\n      tasks_completed:\n        type: number\n        description: "Number of tasks finished"\n      next_steps:\n        type: array\n        items:\n          type: string\n        description: "Recommended next actions"\n    required:\n      - summary\n      - tasks_completed\n'})}),"\n",(0,r.jsx)(n.h3,{id:"retry",children:"Retry"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"retry"})," field enables recipes to automatically retry execution if success criteria are not met. This is useful for recipes that might need multiple attempts to achieve their goal, or for implementing automated validation and recovery workflows."]}),"\n",(0,r.jsx)(n.h4,{id:"retry-schema",children:"Retry Schema"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"max_retries"})}),(0,r.jsx)(n.td,{children:"Number"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"Maximum number of retry attempts"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"checks"})}),(0,r.jsx)(n.td,{children:"Array"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"List of success check configurations"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"timeout_seconds"})}),(0,r.jsx)(n.td,{children:"Number"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"Timeout for success check commands (default: 300 seconds)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"on_failure_timeout_seconds"})}),(0,r.jsx)(n.td,{children:"Number"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"Timeout for on_failure commands (default: 600 seconds)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"on_failure"})}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"Shell command to run when a retry attempt fails"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"success-check-configuration",children:"Success Check Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["Each success check in the ",(0,r.jsx)(n.code,{children:"checks"})," array has the following schema:"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"type"})}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:'Type of check - currently only "shell" is supported'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"command"})}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"Shell command to execute for validation (must exit with code 0 for success)"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"how-retry-logic-works",children:"How Retry Logic Works"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Recipe Execution"}),": The recipe runs normally with the provided instructions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Success Validation"}),": After completion, all success checks are executed in order"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Retry Decision"}),": If any success check fails and retry attempts remain:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Execute the on_failure command (if configured)"}),"\n",(0,r.jsx)(n.li,{children:"Reset the agent's message history to initial state"}),"\n",(0,r.jsx)(n.li,{children:"Increment retry counter and restart execution"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Completion"}),": Process stops when either:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"All success checks pass (success)"}),"\n",(0,r.jsx)(n.li,{children:"Maximum retry attempts are reached (failure)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"basic-retry-example",children:"Basic Retry Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'version: "1.0.0"\ntitle: "Counter Increment Task"\ndescription: "Increment a counter until it reaches target value"\nprompt: "Increment the counter value in /tmp/counter.txt by 1."\n\nretry:\n  max_retries: 5\n  timeout_seconds: 10\n  checks:\n    - type: shell\n      command: "test $(cat /tmp/counter.txt 2>/dev/null || echo 0) -ge 3"\n  on_failure: "echo \'Counter is at:\' $(cat /tmp/counter.txt 2>/dev/null || echo 0) \'(need 3 to succeed)\'"\n'})}),"\n",(0,r.jsx)(n.h4,{id:"advanced-retry-example",children:"Advanced Retry Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'version: "1.0.0"\ntitle: "Service Health Check"\ndescription: "Start service and verify it\'s running properly"\nprompt: "Start the web service and verify it responds to health checks"\n\nretry:\n  max_retries: 3\n  timeout_seconds: 30\n  on_failure_timeout_seconds: 60\n  checks:\n    - type: shell\n      command: "curl -f http://localhost:8080/health"\n    - type: shell  \n      command: "pgrep -f \'web-service\' > /dev/null"\n  on_failure: "systemctl stop web-service || killall web-service"\n'})}),"\n",(0,r.jsx)(n.h4,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,r.jsx)(n.p,{children:"You can configure retry behavior globally using environment variables:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GOOSE_RECIPE_RETRY_TIMEOUT_SECONDS"}),": Global timeout for success check commands"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GOOSE_RECIPE_ON_FAILURE_TIMEOUT_SECONDS"}),": Global timeout for on_failure commands"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"These environment variables are overridden by recipe-specific timeout configurations."}),"\n",(0,r.jsx)(n.h3,{id:"settings",children:"Settings"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"settings"})," field allows you to configure the AI model and provider settings for the recipe. This overrides the default configuration when the recipe is executed."]}),"\n",(0,r.jsx)(n.h4,{id:"settings-schema",children:"Settings Schema"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"goose_provider"})}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:'The AI provider to use (e.g., "anthropic", "openai")'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"goose_model"})}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"The specific model name to use"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"temperature"})}),(0,r.jsx)(n.td,{children:"Number"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"The temperature setting for the model (typically 0.0-1.0)"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"example-settings-configuration",children:"Example Settings Configuration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'settings:\n  goose_provider: "anthropic"\n  goose_model: "claude-sonnet-4-20250514"\n  temperature: 0.7\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'settings:\n  goose_provider: "openai"\n  goose_model: "gpt-4o"\n  temperature: 0.3\n'})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsx)(n.p,{children:"Settings specified in a recipe will override your default goose configuration when that recipe is executed. If no settings are specified, goose will use your configured defaults."})}),"\n",(0,r.jsx)(n.h3,{id:"subrecipes",children:"Subrecipes"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"sub_recipes"})," field specifies the ",(0,r.jsx)(n.a,{href:"/docs/guides/recipes/subrecipes",children:"subrecipes"})," that the main recipe calls to perform specific tasks. Each subrecipe in the ",(0,r.jsx)(n.code,{children:"sub_recipes"})," array has the following schema:"]}),"\n",(0,r.jsx)(n.h4,{id:"subrecipe-schema",children:"Subrecipe Schema"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"name"})}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"Unique identifier for the subrecipe"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"path"})}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"Relative or absolute path to the subrecipe file"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"values"})}),(0,r.jsx)(n.td,{children:"Object"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"Pre-configured parameter values that are passed to the subrecipe"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"sequential_when_repeated"})}),(0,r.jsx)(n.td,{children:"Boolean"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsxs)(n.td,{children:["Forces sequential execution of multiple subrecipe instances. See ",(0,r.jsx)(n.a,{href:"/docs/tutorials/subrecipes-in-parallel",children:"Running Subrecipes In Parallel"})," for details"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"description"})}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"Optional description of the subrecipe"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"example-subrecipe-configuration",children:"Example Subrecipe Configuration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'sub_recipes:\n  - name: "security_scan"\n    path: "./subrecipes/security-analysis.yaml"\n    values:  # in key-value format: {parameter_name}: {parameter_value}\n      scan_level: "comprehensive"\n      include_dependencies: "true"\n  \n  - name: "quality_check"\n    path: "./subrecipes/quality-analysis.yaml"\n    description: "Performs code quality analysis"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"desktop-metadata-fields",children:"Desktop Metadata Fields"}),"\n",(0,r.jsx)(n.p,{children:"Recipes saved from goose Desktop include additional metadata fields. These fields are used by the Desktop app for organization and management but are ignored by CLI operations."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"recipe"})}),(0,r.jsx)(n.td,{children:"Object"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsxs)(n.td,{children:["Contains all recipe fields (",(0,r.jsx)(n.code,{children:"title"}),", ",(0,r.jsx)(n.code,{children:"description"}),", ",(0,r.jsx)(n.code,{children:"instructions"}),", etc.)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"name"})}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"Display name used in Recipe Library"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"isGlobal"})}),(0,r.jsx)(n.td,{children:"Boolean"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"Whether the recipe is available globally or locally to a project"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"lastModified"})}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"ISO timestamp of when the recipe was last modified"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"isArchived"})}),(0,r.jsx)(n.td,{children:"Boolean"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"Whether the recipe is archived in the Desktop interface"})]})]})]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"CLI and Desktop Format Examples"}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"CLI Format"})}),(0,r.jsxs)(l.A,{groupId:"format",children:[(0,r.jsx)(d.A,{value:"yaml",label:"YAML",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'version: "1.0.0"\ntitle: "Code Review Assistant"\ndescription: "Automated code review with best practices"\ninstructions: "You are a code reviewer..."\nprompt: "Review the code in this repository"\nextensions: []\n'})})}),(0,r.jsx)(d.A,{value:"json",label:"JSON",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "version": "1.0.0",\n  "title": "Code Review Assistant",\n  "description": "Automated code review with best practices",\n  "instructions": "You are a code reviewer...",\n  "prompt": "Review the code in this repository",\n  "extensions": []\n}\n'})})})]}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Desktop Format"})}),(0,r.jsxs)(l.A,{groupId:"format",children:[(0,r.jsx)(d.A,{value:"yaml",label:"YAML",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'name: "Code Review Assistant"\nrecipe:\n  version: "1.0.0"\n  title: "Code Review Assistant"\n  description: "Automated code review with best practices"\n  instructions: "You are a code reviewer..."\n  prompt: "Review the code in this repository"\n  extensions: []\nisGlobal: true\nlastModified: 2025-07-02T03:46:46.778Z\nisArchived: false\n'})})}),(0,r.jsx)(d.A,{value:"json",label:"JSON",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "Code Review Assistant",\n  "recipe": {\n    "version": "1.0.0",\n    "title": "Code Review Assistant",\n    "description": "Automated code review with best practices",\n    "instructions": "You are a code reviewer...",\n    "prompt": "Review the code in this repository",\n    "extensions": []\n  },\n  "isGlobal": true,\n  "lastModified": "2025-07-02T03:46:46.778Z",\n  "isArchived": false\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.h2,{id:"template-support",children:"Template Support"}),"\n",(0,r.jsxs)(n.p,{children:["Recipes support Jinja-style template syntax in ",(0,r.jsx)(n.code,{children:"instructions"}),", ",(0,r.jsx)(n.code,{children:"prompt"}),", and ",(0,r.jsx)(n.code,{children:"activities"})," fields for parameter substitution:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'instructions: "Follow these steps with {{ parameter_name }}"\nprompt: "Your task is to {{ action }}"\nactivities:\n  - "Process {{ parameter_name }} with {{ action }}"\n'})}),"\n",(0,r.jsx)(n.p,{children:"Advanced template features include:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#template-inheritance",children:"Template inheritance"})," using ",(0,r.jsx)(n.code,{children:'{% extends "parent.yaml" %}'})]}),"\n",(0,r.jsxs)(n.li,{children:["Blocks that can be defined and overridden:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"{% block content %}\nDefault content\n{% endblock %}\n"})}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsxs)(n.a,{href:"#indent-filter-for-multi-line-values",children:[(0,r.jsx)(n.code,{children:"indent()"})," template filter"]})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"template-inheritance",children:"Template Inheritance"}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:'{% extends "parent.yaml" %}'})," for template inheritance:"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["Parent recipe (",(0,r.jsx)(n.code,{children:"parent.yaml"}),"):"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'version: "1.0.0"\ntitle: "Parent Recipe"\ndescription: "Base recipe template"\nprompt: |\n  {% block prompt %}\n  Default prompt text\n  {% endblock %}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Child recipe:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'{% extends "parent.yaml" %}\n{% block prompt %}\nModified prompt text\n{% endblock %}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"indent-filter-for-multi-line-values",children:"indent() Filter For Multi-Line Values"}),"\n",(0,r.jsxs)(n.p,{children:["Use the ",(0,r.jsx)(n.code,{children:"indent()"})," filter to ensure multi-line parameter values are properly indented and can be resolved as valid JSON or YAML format. This example uses ",(0,r.jsx)(n.code,{children:"{{ raw_data | indent(2) }}"})," to specify an indentation of two spaces when passing data to a subrecipe:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'sub_recipes:\n  - name: "analyze"\n    path: "./analyze.yaml"\n    values:\n      content: |\n        {{ raw_data | indent(2) }}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"built-in-parameters",children:"Built-in Parameters"}),"\n",(0,r.jsxs)(n.p,{children:["Built-in template parameters are automatically supported and don't need to be defined in the ",(0,r.jsx)(n.code,{children:"parameters"})," array."]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"recipe_dir"})}),(0,r.jsxs)(n.td,{children:["Automatically set to the directory containing the recipe file. Use it to reference companion files, for example: ",(0,r.jsx)(n.code,{children:"{{ recipe_dir }}/style-guide.md"})]})]})})]}),"\n",(0,r.jsx)(n.h2,{id:"validation-rules",children:"Validation Rules"}),"\n",(0,r.jsxs)(n.p,{children:["Validation rules from ",(0,r.jsx)(n.a,{href:"https://github.com/block/goose/blob/main/crates/goose/src/recipe/validate_recipe.rs",children:(0,r.jsx)(n.code,{children:"validate_recipe.rs"})})," are enforced when loading recipes and used by the ",(0,r.jsx)(n.a,{href:"/docs/guides/goose-cli-commands#recipe",children:(0,r.jsx)(n.code,{children:"goose recipe validate"})})," subcommand:"]}),"\n",(0,r.jsx)(n.h3,{id:"recipe-level-validation",children:"Recipe-Level Validation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"validate_prompt_or_instructions"})," - At least one of ",(0,r.jsx)(n.code,{children:"instructions"})," or ",(0,r.jsx)(n.code,{children:"prompt"})," must be present"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"validate_json_schema"})," - JSON response schema must be valid if ",(0,r.jsx)(n.code,{children:"response.json_schema"})," is specified"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"parameter-validation",children:"Parameter Validation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"validate_parameters_in_template"})," - All template variables must have corresponding parameter definitions, and all defined parameters must be used (no unused parameters)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"validate_optional_parameters"})," - Optional parameters must have default values"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"validate_optional_parameters"})," - File parameters cannot have default values to prevent importing sensitive files"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["Basic field requirements (required fields, types, character limits) are documented in the ",(0,r.jsx)(n.a,{href:"#core-recipe-schema",children:"Core Recipe Schema"})," table."]})}),"\n",(0,r.jsx)(n.h2,{id:"complete-recipe-example",children:"Complete Recipe Example"}),"\n",(0,r.jsxs)(l.A,{groupId:"format",children:[(0,r.jsx)(d.A,{value:"yaml",label:"YAML",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'version: "1.0.0"\ntitle: "Example Recipe"\ndescription: "A sample recipe demonstrating the format"\ninstructions: "Process {{ file_count }} files using {{ required_param }} and output in {{ output_format }} format. Configuration: {{ config_file }}"\nprompt: "Start processing with the provided parameters"\nparameters:\n  - key: required_param\n    input_type: string\n    requirement: required\n    description: "A required text parameter"\n  \n  - key: file_count\n    input_type: number\n    requirement: optional\n    default: 10\n    description: "Maximum number of files to process"\n  \n  - key: output_format\n    input_type: select\n    requirement: required\n    description: "Choose the output format"\n    options:\n      - json\n      - markdown\n      - csv\n  \n  - key: config_file\n    input_type: file\n    requirement: required\n    description: "Path to configuration file"\n\nextensions:\n  - type: stdio\n    name: codesearch\n    cmd: uvx\n    args:\n      - mcp_codesearch@latest\n    timeout: 300\n    bundled: true\n    description: "Query codesearch directly from goose"\n\nsettings:\n  goose_provider: "anthropic"\n  goose_model: "claude-sonnet-4-20250514"\n  temperature: 0.7\n\nretry:\n  max_retries: 3\n  timeout_seconds: 30\n  checks:\n    - type: shell\n      command: "echo \'Task validation check passed\'"\n  on_failure: "echo \'Retry attempt failed, cleaning up...\'"\n\nresponse:\n  json_schema:\n    type: object\n    properties:\n      result:\n        type: string\n        description: "The main result of the task"\n      details:\n        type: array\n        items:\n          type: string\n        description: "Additional details of steps taken"\n    required:\n      - result\n      - details\n'})})}),(0,r.jsx)(d.A,{value:"json",label:"JSON",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "version": "1.0.0",\n  "title": "Example Recipe",\n  "description": "A sample recipe demonstrating the format",\n  "instructions": "Process {{ file_count }} files using {{ required_param }} and output in {{ output_format }} format. Configuration: {{ config_file }}",\n  "prompt": "Start processing with the provided parameters",\n  "parameters": [\n    {\n      "key": "required_param",\n      "input_type": "string",\n      "requirement": "required",\n      "description": "A required text parameter"\n    },\n    {\n      "key": "file_count",\n      "input_type": "number",\n      "requirement": "optional",\n      "default": "10",\n      "description": "Maximum number of files to process"\n    },\n    {\n      "key": "output_format",\n      "input_type": "select",\n      "requirement": "required",\n      "description": "Choose the output format",\n      "options": ["json", "markdown", "csv"]\n    },\n    {\n      "key": "config_file",\n      "input_type": "file",\n      "requirement": "required",\n      "description": "Path to configuration file"\n    }\n  ],\n  "extensions": [\n    {\n      "type": "stdio",\n      "name": "codesearch",\n      "cmd": "uvx",\n      "args": ["mcp_codesearch@latest"],\n      "timeout": 300,\n      "bundled": true,\n      "description": "Query codesearch directly from goose"\n    }\n  ],\n  "settings": {\n    "goose_provider": "anthropic",\n    "goose_model": "claude-sonnet-4-20250514",\n    "temperature": 0.7\n  },\n  "retry": {\n    "max_retries": 3,\n    "timeout_seconds": 30,\n    "checks": [\n      {\n        "type": "shell",\n        "command": "echo \'Task validation check passed\'"\n      }\n    ],\n    "on_failure": "echo \'Retry attempt failed, cleaning up...\'"\n  },\n  "response": {\n    "json_schema": {\n      "type": "object",\n      "properties": {\n        "result": {\n          "type": "string",\n          "description": "The main result of the task"\n        },\n        "details": {\n          "type": "array",\n          "items": {\n            "type": "string"\n          },\n          "description": "Additional details of steps taken"\n        }\n      },\n      "required": ["result", "details"]\n    }\n  }\n}\n'})})})]}),"\n",(0,r.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,r.jsx)(n.p,{children:"Common errors to watch for:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Missing required parameters"}),"\n",(0,r.jsx)(n.li,{children:"Optional parameters without default values"}),"\n",(0,r.jsx)(n.li,{children:"Template variables without parameter definitions"}),"\n",(0,r.jsx)(n.li,{children:"Invalid YAML/JSON syntax"}),"\n",(0,r.jsx)(n.li,{children:"Missing required fields"}),"\n",(0,r.jsx)(n.li,{children:"Invalid extension configurations"}),"\n",(0,r.jsx)(n.li,{children:"Invalid retry configuration (missing required fields, invalid shell commands)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"When these occur, goose will provide helpful error messages indicating what needs to be fixed."}),"\n",(0,r.jsx)(n.h3,{id:"retry-specific-errors",children:"Retry-Specific Errors"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Invalid success checks"}),": Shell commands that cannot be executed or have syntax errors"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Timeout errors"}),": Success checks or on_failure commands that exceed their timeout limits"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Max retries exceeded"}),": When all retry attempts are exhausted without success"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Missing required retry fields"}),": When ",(0,r.jsx)(n.code,{children:"max_retries"})," or ",(0,r.jsx)(n.code,{children:"checks"})," are not specified"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"learn-more",children:"Learn More"}),"\n",(0,r.jsxs)(n.p,{children:["Check out the ",(0,r.jsx)(n.a,{href:"/docs/guides/recipes",children:"Recipes"})," guide for more docs, tools, and resources to help you master goose recipes."]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}}}]);