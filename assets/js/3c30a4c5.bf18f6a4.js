"use strict";(globalThis.webpackChunkgoose=globalThis.webpackChunkgoose||[]).push([[3023],{10931:(e,n,t)=>{t.d(n,{A:()=>s});t(96540);var i=t(71112),o=t(74848);function s({extensionId:e,extensionName:n,description:t,type:s,command:r,args:l,url:a,envVars:d=[],apiKeyLink:c,apiKeyLinkText:h,customStep3:u,hasEnvVars:p,appendToStep3:m}){const x=s||(r?"stdio":a?"sse":"stdio"),g=(()=>{if(u)return u;if(c&&h)return(0,o.jsxs)(o.Fragment,{children:["Get your ",(0,o.jsx)("a",{href:c,children:h})," and paste it in"]});if(d.length>0){const e=d.map(e=>e.name).join(", "),n="http"===x,t=n?"header":"environment variable",i=n?"headers":"environment variables";return`Obtain your ${e} and paste ${d.length>1?`them as ${i}`:`it as a ${t}`}`}return null})(),j=m?(0,o.jsxs)(o.Fragment,{children:[g,g?(0,o.jsx)("br",{}):null,m]}):g,y=p??null!==j;return(0,o.jsx)("div",{children:(0,o.jsxs)("ol",{children:[(0,o.jsx)("li",{children:(0,o.jsx)("a",{href:(()=>{let i=[];"http"===x&&i.push("type=streamable_http"),a?i.push(`url=${encodeURIComponent(a)}`):r&&l&&(i.push(`cmd=${encodeURIComponent(r)}`),i.push(...l.map(e=>`arg=${encodeURIComponent(e)}`))),i.push(`id=${encodeURIComponent(e)}`,`name=${encodeURIComponent(n)}`,`description=${encodeURIComponent(t)}`);const o="http"===x?"header":"env";return i.push(...d.map(e=>`${o}=${encodeURIComponent(`${e.name}=${e.label}`)}`)),`goose://extension?${i.join("&")}`})(),children:"Launch the installer"})}),(0,o.jsxs)("li",{children:["Click ",(0,o.jsx)("code",{children:"Yes"})," to confirm the installation"]}),y&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("li",{children:j}),(0,o.jsxs)("li",{children:["Click ",(0,o.jsx)("code",{children:"Add Extension"})]})]}),(0,o.jsxs)("li",{children:["Click the ",(0,o.jsx)(i.A,{className:"inline",size:16})," button in the top-left to open the sidebar"]}),(0,o.jsx)("li",{children:"Navigate to the chat"})]})})}},71654:(e,n,t)=>{t.d(n,{A:()=>r});t(96540);var i=t(83457),o=t(27293),s=t(74848);function r({name:e,description:n,type:t="stdio",command:r,url:l,timeout:a=300,envVars:d=[],infoNote:c,commandNote:h}){const u=d.length>0,p="sse"===t,m="http"===t,x=p||m,g=m?"Would you like to add custom headers?":"Would you like to add environment variables?";u&&d.length;return(0,s.jsxs)("div",{children:[(0,s.jsx)("ol",{children:(0,s.jsxs)("li",{children:["Run the ",(0,s.jsx)("code",{children:"configure"})," command:"]})}),(0,s.jsx)(i.A,{language:"sh",children:"goose configure"}),(0,s.jsx)("ol",{start:2,children:(0,s.jsxs)("li",{children:["Choose to add a"," ",(0,s.jsx)("code",{children:p?"Remote Extension (SSE)":m?"Remote Extension (Streaming HTTP)":"Command-line Extension"}),"."]})}),(0,s.jsx)(i.A,{language:"sh",children:`\u250c   goose-configure \n\u2502\n\u25c7  What would you like to configure?\n\u2502  Add Extension \n\u2502\n\u25c6  What type of extension would you like to add?\n${p?"\u2502  \u25cb Built-in Extension\n\u2502  \u25cb Command-line Extension\n// highlight-start\n\u2502  \u25cf Remote Extension (SSE) (Connect to a remote extension via Server-Sent Events)\n// highlight-end\n\u2502  \u25cb Remote Extension (Streaming HTTP)":m?"\u2502  \u25cb Built-in Extension\n\u2502  \u25cb Command-line Extension\n\u2502  \u25cb Remote Extension (SSE)\n// highlight-start\n\u2502  \u25cf Remote Extension (Streaming HTTP) (Connect to a remote extension via MCP Streaming HTTP)\n// highlight-end":"\u2502  \u25cb Built-in Extension\n// highlight-start\n\u2502  \u25cf Command-line Extension (Run a local command or script)\n// highlight-end\n\u2502  \u25cb Remote Extension (SSE)\n\u2502  \u25cb Remote Extension (Streaming HTTP)"}\n\u2514`}),(0,s.jsx)("ol",{start:3,children:(0,s.jsx)("li",{children:"Give your extension a name."})}),(0,s.jsx)(i.A,{language:"sh",children:`\u250c   goose-configure \n\u2502\n\u25c7  What would you like to configure?\n\u2502  Add Extension\n\u2502\n\u25c7  What type of extension would you like to add?\n\u2502  ${p?"Remote Extension (SSE)":m?"Remote Extension (Streaming HTTP)":"Command-line Extension"}\n\u2502\n// highlight-start\n\u25c6  What would you like to call this extension?\n\u2502  ${e}\n// highlight-end\n\u2514`}),x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("ol",{start:4,children:(0,s.jsxs)("li",{children:["Enter the ",p?"SSE endpoint URI":"Streaming HTTP endpoint URI","."]})}),h&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.A,{type:"info",children:h}),(0,s.jsx)("br",{})]}),(0,s.jsx)(i.A,{language:"sh",children:`\u250c   goose-configure \n\u2502\n\u25c7  What would you like to configure?\n\u2502  Add Extension \n\u2502\n\u25c7  What type of extension would you like to add?\n\u2502  ${p?"Remote Extension (SSE)":"Remote Extension (Streaming HTTP)"}\n\u2502\n\u25c7  What would you like to call this extension?\n\u2502  ${e}\n\u2502\n// highlight-start\n\u25c6  What is the ${p?"SSE endpoint URI":"Streaming HTTP endpoint URI"}?\n\u2502  ${l}\n// highlight-end\n\u2514`})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("ol",{start:4,children:(0,s.jsx)("li",{children:"Enter the command to run when this extension is used."})}),h&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.A,{type:"info",children:h}),(0,s.jsx)("br",{})]}),(0,s.jsx)(i.A,{language:"sh",children:`\u250c   goose-configure \n\u2502\n\u25c7  What would you like to configure?\n\u2502  Add Extension\n\u2502\n\u25c7  What type of extension would you like to add?\n\u2502  Command-line Extension \n\u2502\n\u25c7  What would you like to call this extension?\n\u2502  ${e}\n\u2502\n// highlight-start\n\u25c6  What command should be run?\n\u2502  ${r}\n// highlight-end\n\u2514`})]}),(0,s.jsx)("ol",{start:5,children:(0,s.jsxs)("li",{children:["Enter the number of seconds goose should wait for actions to complete before timing out. Default is"," ",(0,s.jsx)("code",{children:"300"})," seconds."]})}),(0,s.jsx)(i.A,{language:"sh",children:`\u250c   goose-configure \n\u2502\n\u25c7  What would you like to configure?\n\u2502  Add Extension\n\u2502\n\u25c7  What type of extension would you like to add?\n\u2502  ${p?"Remote Extension (SSE)":m?"Remote Extension (Streaming HTTP)":"Command-line Extension"}\n\u2502\n\u25c7  What would you like to call this extension?\n\u2502  ${e}\n\u2502\n${x?`\u25c7  What is the ${p?"SSE endpoint URI":"Streaming HTTP endpoint URI"}?\n\u2502  ${l}\n\u2502`:`\u25c7  What command should be run?\n\u2502  ${r}\n\u2502`}\n// highlight-start\n\u25c6  Please set the timeout for this tool (in secs):\n\u2502  ${a}\n// highlight-end\n\u2514`}),(0,s.jsx)("ol",{start:6,children:(0,s.jsx)("li",{children:"Enter a description for this extension."})}),(0,s.jsx)(i.A,{language:"sh",children:`\u250c   goose-configure \n\u2502\n\u25c7  What would you like to configure?\n\u2502  Add Extension\n\u2502\n\u25c7  What type of extension would you like to add?\n\u2502  ${p?"Remote Extension (SSE)":m?"Remote Extension (Streaming HTTP)":"Command-line Extension"}\n\u2502\n\u25c7  What would you like to call this extension?\n\u2502  ${e}\n\u2502\n${x?`\u25c7  What is the ${p?"SSE endpoint URI":"Streaming HTTP endpoint URI"}?\n\u2502  ${l}\n\u2502`:`\u25c7  What command should be run?\n\u2502  ${r}\n\u2502`}\n\u25c7  Please set the timeout for this tool (in secs):\n\u2502  ${a}\n\u2502\n// highlight-start\n\u25c6  Enter a description for this extension:\n\u2502  ${n}\n// highlight-end\n\u2514`}),(0,s.jsx)("ol",{start:7,children:(0,s.jsx)("li",{children:u?m?(0,s.jsxs)(s.Fragment,{children:["Add ",d.length>1?"custom headers":"a custom header"," for this extension."]}):(0,s.jsxs)(s.Fragment,{children:["Add ",d.length>1?"environment variables":"an environment variable"," for this extension."]}):m?(0,s.jsxs)(s.Fragment,{children:["Choose ",(0,s.jsx)("code",{children:"No"})," when asked to add custom headers."]}):(0,s.jsxs)(s.Fragment,{children:["Choose ",(0,s.jsx)("code",{children:"No"})," when asked to add environment variables."]})})}),!u&&(0,s.jsx)(i.A,{language:"sh",children:`\u250c   goose-configure \n\u2502\n\u25c7  What would you like to configure?\n\u2502  Add Extension \n\u2502\n\u25c7  What type of extension would you like to add?\n\u2502  ${p?"Remote Extension (SSE)":m?"Remote Extension (Streaming HTTP)":"Command-line Extension"}\n\u2502\n\u25c7  What would you like to call this extension?\n\u2502  ${e}\n\u2502\n${x?`\u25c7  What is the ${p?"SSE endpoint URI":"Streaming HTTP endpoint URI"}?\n\u2502  ${l}\n\u2502`:`\u25c7  What command should be run?\n\u2502  ${r}\n\u2502`}\n\u25c7  Please set the timeout for this tool (in secs):\n\u2502  ${a}\n\u2502\n\u25c7  Enter a description for this extension:\n\u2502  ${n}\n\u2502\n// highlight-start\n\u25c6  ${g}\n\u2502  No\n// highlight-end\n\u2502\n\u2514  Added ${e} extension`}),u&&(0,s.jsxs)(s.Fragment,{children:[c&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.A,{type:"info",children:c}),(0,s.jsx)("br",{})]}),(0,s.jsx)(i.A,{language:"sh",children:`\u250c   goose-configure \n\u2502\n\u25c7  What would you like to configure?\n\u2502  Add Extension\n\u2502\n\u25c7  What type of extension would you like to add?\n\u2502  ${p?"Remote Extension (SSE)":m?"Remote Extension (Streaming HTTP)":"Command-line Extension"}\n\u2502\n\u25c7  What would you like to call this extension?\n\u2502  ${e}\n\u2502\n${x?`\u25c7  What is the ${p?"SSE endpoint URI":"Streaming HTTP endpoint URI"}?\n\u2502  ${l}\n\u2502`:`\u25c7  What command should be run?\n\u2502  ${r}\n\u2502`}\n\u25c7  Please set the timeout for this tool (in secs):\n\u2502  ${a}\n\u2502\n\u25c7  Enter a description for this extension:\n\u2502  ${n}\n\u2502\n// highlight-start\n\u25c6  ${g}\n\u2502  Yes\n${d.map(({key:e,value:n},t)=>`\u2502\n\u25c7  ${m?"Header name":"Environment variable name"}:\n\u2502  ${e}\n\u2502\n\u25c7  ${m?"Header value":"Environment variable value"}:\n\u2502  ${n}\n\u2502\n\u25c7  Add another ${m?"header":"environment variable"}?\n\u2502  ${t===d.length-1?"No":"Yes"}`).join("\n")}\n// highlight-end\n\u2502\n\u2514  Added ${e} extension`})]})]})}},94051:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>h,default:()=>x,frontMatter:()=>c,metadata:()=>i,toc:()=>p});const i=JSON.parse('{"id":"mcp/nostrbook-mcp","title":"Nostrbook Extension","description":"Add Nostrbook MCP Server as a goose Extension","source":"@site/docs/mcp/nostrbook-mcp.md","sourceDirName":"mcp","slug":"/mcp/nostrbook-mcp","permalink":"/goose/docs/mcp/nostrbook-mcp","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Nostrbook Extension","description":"Add Nostrbook MCP Server as a goose Extension"},"sidebar":"tutorialSidebar","previous":{"title":"Netlify Extension","permalink":"/goose/docs/mcp/netlify-mcp"},"next":{"title":"OpenMetadata Extension","permalink":"/goose/docs/mcp/openmetadata-mcp"}}');var o=t(74848),s=t(28453),r=t(11470),l=t(19365),a=t(10931),d=t(71654);const c={title:"Nostrbook Extension",description:"Add Nostrbook MCP Server as a goose Extension"},h=void 0,u={},p=[{value:"Configuration",id:"configuration",level:2},{value:"Example Usage",id:"example-usage",level:2},{value:"goose Prompt",id:"goose-prompt",level:3},{value:"goose Output",id:"goose-output",level:3},{value:"Core Concept",id:"core-concept",level:2},{value:"Implementation Guide",id:"implementation-guide",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Step 1: Set Up Recipient Information (For Receiving Nutzaps)",id:"step-1-set-up-recipient-information-for-receiving-nutzaps",level:3},{value:"Step 2: Building the Sender Functionality",id:"step-2-building-the-sender-functionality",level:3},{value:"Step 3: Building the Recipient Functionality",id:"step-3-building-the-recipient-functionality",level:3},{value:"Important Implementation Details",id:"important-implementation-details",level:3},{value:"Testing",id:"testing",level:2},{value:"Security Considerations",id:"security-considerations",level:2}];function m(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["This tutorial covers how to add the ",(0,o.jsx)(n.a,{href:"https://gitlab.com/soapbox-pub/nostrbook",children:"Nostrbook MCP Server"})," as a goose extension to provide access to a comprehensive registry of Nostr documentation that helps users understand the decentralized social protocol, its implementation possibilities, and technical specifications."]}),"\n",(0,o.jsx)(n.admonition,{title:"TLDR",type:"tip",children:(0,o.jsxs)(r.A,{groupId:"interface",children:[(0,o.jsx)(l.A,{value:"ui",label:"goose Desktop",default:!0,children:(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"goose://extension?cmd=npx&arg=-y&arg=%40nostrbook%2Fmcp&id=nostrbook&name=Nostrbook&description=A%20comprehensive%20registry%20of%20Nostr%20documentation%20with%20structured%20knowledge",children:"Launch the installer"})})}),(0,o.jsxs)(l.A,{value:"cli",label:"goose CLI",children:[(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Command"})}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"npx -y @nostrbook/mcp@latest\n"})})]})]})}),"\n",(0,o.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["Note that you'll need ",(0,o.jsx)(n.a,{href:"https://nodejs.org/",children:"Node.js"})," installed on your system to run this command, as it uses ",(0,o.jsx)(n.code,{children:"npx"}),"."]})}),"\n",(0,o.jsxs)(r.A,{groupId:"interface",children:[(0,o.jsx)(l.A,{value:"ui",label:"goose Desktop",default:!0,children:(0,o.jsx)(a.A,{extensionId:"nostrbook",extensionName:"Nostrbook",description:"A comprehensive registry of Nostr documentation with structured knowledge",command:"npx",args:["-y","@nostrbook/mcp"]})}),(0,o.jsx)(l.A,{value:"cli",label:"goose CLI",children:(0,o.jsx)(d.A,{name:"Nostrbook",description:"A comprehensive registry of Nostr documentation with structured knowledge",command:"npx -y @nostrbook/mcp@latest"})})]}),"\n",(0,o.jsx)(n.h2,{id:"example-usage",children:"Example Usage"}),"\n",(0,o.jsx)(n.h3,{id:"goose-prompt",children:"goose Prompt"}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.em,{children:"goose, what is the NIP-61 and how can I implement it?."})}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"goose-output",children:"goose Output"}),"\n",(0,o.jsx)(n.p,{children:"Note that IDs have been changed to generic ones"}),"\n",(0,o.jsxs)(n.admonition,{title:"CLI",type:"note",children:[(0,o.jsxs)(t,{children:[(0,o.jsx)("summary",{children:"Tool Calls"}),(0,o.jsx)(n.p,{children:"\u2500\u2500\u2500 read_nip | nostrbook \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500"}),(0,o.jsx)(n.p,{children:"nip: 61"})]}),(0,o.jsx)(n.h1,{id:"nip-61-implementing-nutzaps",children:"NIP-61: Implementing Nutzaps"}),(0,o.jsx)(n.p,{children:'NIP-61 defines "Nutzaps," which are P2PK Cashu tokens where the payment itself acts as the receipt. This protocol allows for Bitcoin micropayments through the Nostr ecosystem using Cashu tokens.'}),(0,o.jsx)(n.h2,{id:"core-concept",children:"Core Concept"}),(0,o.jsx)(n.p,{children:"Nutzaps enable users to send small Bitcoin payments to each other through Nostr events, with the tokens being locked to the recipient's specified public key."}),(0,o.jsx)(n.h2,{id:"implementation-guide",children:"Implementation Guide"}),(0,o.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Familiarize yourself with ",(0,o.jsx)(n.a,{href:"https://cashu.space/",children:"Cashu"})," and ",(0,o.jsx)(n.a,{href:"https://github.com/cashubtc/nuts/blob/main/11.md",children:"P2PK token locking"})]}),"\n",(0,o.jsxs)(n.li,{children:["Understand ",(0,o.jsx)(n.a,{href:"https://github.com/nostr-protocol/nips/blob/master/60.md",children:"NIP-60"})," for wallet functionality"]}),"\n",(0,o.jsx)(n.li,{children:"Ensure your implementation supports NUT-11 (P2PK) and NUT-12 (DLEQ proofs)"}),"\n"]}),(0,o.jsx)(n.h3,{id:"step-1-set-up-recipient-information-for-receiving-nutzaps",children:"Step 1: Set Up Recipient Information (For Receiving Nutzaps)"}),(0,o.jsxs)(n.p,{children:["Create and publish a ",(0,o.jsx)(n.code,{children:"kind:10019"})," event to inform others how to send you money:"]}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n    "kind": 10019,\n    "tags": [\n        ["relay", "wss://your-relay1.com"],\n        ["relay", "wss://your-relay2.com"],\n        ["mint", "https://your-trusted-mint.com", "sat"],\n        ["pubkey", "<your-p2pk-pubkey>"]\n    ]\n}\n'})}),(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"pubkey"})," should be a dedicated public key (NOT your Nostr identity key)"]}),"\n",(0,o.jsx)(n.li,{children:"Store the corresponding private key safely in your NIP-60 wallet event"}),"\n",(0,o.jsx)(n.li,{children:"List only mints you trust and monitor"}),"\n"]}),(0,o.jsx)(n.h3,{id:"step-2-building-the-sender-functionality",children:"Step 2: Building the Sender Functionality"}),(0,o.jsx)(n.p,{children:"To implement nutzapping:"}),(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Query recipient information"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"// Fetch recipient's kind:10019 event\nconst recipientInfo = await relay.get({\n  kinds: [10019],\n  authors: [recipientPubkey]\n});\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Extract mint and P2PK information"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"const recipientMints = recipientInfo.tags\n  .filter(tag => tag[0] === 'mint')\n  .map(tag => tag[1]);\n\nconst recipientLockKey = recipientInfo.tags\n  .find(tag => tag[0] === 'pubkey')?.[1];\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Mint or swap tokens"})," at one of the recipient's trusted mints, P2PK-locking them to their specified key"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Publish the nutzap event"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n    "kind": 9321,\n    "content": "Thanks for your post!",\n    "tags": [\n        ["proof", "{\\"amount\\":1,\\"C\\":\\"02...3f\\",\\"id\\":\\"000...\\",\\"secret\\":\\"[\\\\\\"P2PK\\\\\\",...]\\"}"],\n        ["u", "https://recipient-specified-mint.com"],\n        ["e", "<event-being-zapped>", "<relay-hint>"],\n        ["p", "<recipient-pubkey>"]\n    ]\n}\n'})}),"\n"]}),"\n"]}),(0,o.jsx)(n.h3,{id:"step-3-building-the-recipient-functionality",children:"Step 3: Building the Recipient Functionality"}),(0,o.jsx)(n.p,{children:"To implement nutzap receiving:"}),(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Query for incoming nutzaps"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'// Subscribe to nutzap events\nrelay.subscribe([\n  {\n    kinds: [9321],\n    "#p": [myPubkey],\n    "#u": myTrustedMints,\n    since: lastCheckTimestamp\n  }\n]);\n'})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Validate incoming nutzaps"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Verify the token is from a mint you've specified"}),"\n",(0,o.jsx)(n.li,{children:"Verify the token is locked to your P2PK key"}),"\n",(0,o.jsx)(n.li,{children:"Verify the DLEQ proof"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Redeem the token"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Swap the P2PK token into your wallet"}),"\n",(0,o.jsxs)(n.li,{children:["Create a ",(0,o.jsx)(n.code,{children:"kind:7376"})," event to record redemption:"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n    "kind": 7376,\n    "content": "<encrypted-content>", \n    "tags": [\n        ["e", "<nutzap-event-id>", "", "redeemed"],\n        ["p", "<sender-pubkey>"]\n    ]\n}\n'})}),"\n"]}),"\n"]}),(0,o.jsx)(n.h3,{id:"important-implementation-details",children:"Important Implementation Details"}),(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"P2PK Key Prefixing"}),': Always prefix the P2PK-lock public key with "02" for compatibility']}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Token Verification"}),": Implement local verification of DLEQ proofs"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Mint URL Normalization"}),": Normalize mint URLs to avoid issues with slight URL variations"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"User Guidance"}),": Guide users to use only NUT-11 and NUT-12 compatible mints"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Publishing Locations"}),": Publish nutzap events to the recipient's specified relays"]}),"\n"]}),(0,o.jsx)(n.h2,{id:"testing",children:"Testing"}),(0,o.jsx)(n.p,{children:"When testing your implementation:"}),(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Create test nutzaps with small amounts"}),"\n",(0,o.jsx)(n.li,{children:"Verify token redemption works correctly"}),"\n",(0,o.jsx)(n.li,{children:"Check that redemption records are properly created"}),"\n",(0,o.jsx)(n.li,{children:"Test with multiple mints for compatibility"}),"\n"]}),(0,o.jsx)(n.h2,{id:"security-considerations",children:"Security Considerations"}),(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Never use the user's main Nostr key for P2PK operations"}),"\n",(0,o.jsx)(n.li,{children:"Ensure proper encryption of sensitive wallet data"}),"\n",(0,o.jsx)(n.li,{children:"Validate all proofs before attempting to redeem tokens"}),"\n",(0,o.jsx)(n.li,{children:"Only interact with explicitly trusted mints"}),"\n"]}),(0,o.jsx)(n.p,{children:"By following these steps, you can implement a complete nutzap solution that allows users to send and receive Bitcoin micropayments through the Nostr protocol using Cashu tokens."})]})]})}function x(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(m,{...e})}):m(e)}}}]);